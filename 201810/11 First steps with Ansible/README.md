11 Автоматизация администрирования. Ansible. 20181130 [Первые шаги с Ansible]

Первые шаги с Ansible

Подготовить стенд на Vagrant как минимум с одним сервером. На этом сервере используя Ansible необходимо развернуть nginx со следующими условиями:
- необходимо использовать модуль yum/apt
- конфигурационные файлы должны быть взяты из шаблона jinja2 с перемененными
- после установки nginx должен быть в режиме enabled в systemd
- должен быть использован notify для старта nginx после установки
- сайт должен слушать на нестандартном порту - 8080, для этого использовать переменные в Ansible
* Сделать все это с использованием Ansible роли

Домашнее задание считается принятым, если:
- предоставлен Vagrantfile и готовый playbook/роль ( инструкция по запуску стенда, если посчитаете необходимым )
- после запуска стенда nginx доступен на порту 8080
- при написании playbook/роли соблюдены перечисленные в задании условия
Критерии оценки: Ставим 5 если создан playbook
Ставим 6 если написана роль

Позволил себе отступить от первоначальной формулировки задачи, т.к. почти не использую nginx. 
Поскольку на момент выполнения задания мне нужно было установить apache именно под него адаптировано это дз.
Т.к. было жалко времени писать все с нуля, воспользовался готовой ролью с ansible galaxy https://galaxy.ansible.com/bertvv/httpd 
Роль модифицировал под свои нужды

Изначально в роли уже реализованы все требования данного дз, мне нужно было добавить в роль:
- корректировку шаблона httpd.conf
- генерацию самоподписанного сертификата
- корректировку шаблона конфига ssl.conf
- отключение ненужных модулей, директив
- добавить шаблоны конфигов с нужными директивами

то что получилось https://github.com/ivanbologov/ansible-role-httpd
с историй изменений

Vagrantfile установит httpd на host1